<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:QuanLyXe03.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vlc="clr-namespace:LibVLCSharp.Avalonia;assembly=LibVLCSharp.Avalonia"
        mc:Ignorable="d"
        x:Class="QuanLyXe03.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="QuanLyXe"
        Width="1200" Height="800"
        MinWidth="900" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        Background="#f8f9fa">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>


    <DockPanel>
        
        <!-- âœ… Menu Bar -->
        <Menu DockPanel.Dock="Top" Background="#2C3E50" Foreground="White">
            
            <!-- Menu Há»‡ thá»‘ng -->
            <MenuItem Header="Há»‡ thá»‘ng" Foreground="White">
                <MenuItem Header="CÃ i Ä‘áº·t"/>
                <MenuItem Header="Sao lÆ°u dá»¯ liá»‡u"/>
                <Separator/>
                <MenuItem Header="ThoÃ¡t" Click="Exit_Click"/>
            </MenuItem>
            
            <!-- Menu Dá»¯ liá»‡u -->
            <MenuItem Header="Dá»¯ liá»‡u" Foreground="White">
                <MenuItem Header="Danh sÃ¡ch tháº»" Click="OpenCardManagement_Click"/>
                
                <MenuItem Header="Lá»‹ch sá»­ xe ra vÃ o" Click="OpenCardEventManagement_Click"/>
                <MenuItem Header="Danh sÃ¡ch khÃ¡ch hÃ ng"/>
            </MenuItem>
            
        </Menu>



    <!-- Grid chÃ­nh -->
    <Grid RowDefinitions="6*,4*" Background="#ECEFF1">  <!-- Äiá»u chá»‰nh tá»· lá»‡ rows -->

        <!-- HÃ ng trÃªn: Camera VÃ€O & RA -->
        <Grid Grid.Row="0" ColumnDefinitions="1*,1*" Margin="6">
            <!-- Camera VÃ o -->
<Border Grid.Column="0" Background="#F0F0F0" Margin="5" CornerRadius="8"
        BorderBrush="#2C3E50" BorderThickness="2">
    <Grid RowDefinitions="Auto,*">
        <Border Background="#2C3E50" Height="36" CornerRadius="8,8,0,0">
            <TextBlock Text="ðŸš—  VÃ€O"
                       Foreground="White" FontSize="18" FontWeight="Bold"
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Border>

        <!-- âœ… XÃ“A MediaPlayer binding, chá»‰ Ä‘á»ƒ x:Name -->
        <vlc:VideoView Grid.Row="1"
                       x:Name="CameraInView"
                       HorizontalAlignment="Stretch"
                       VerticalAlignment="Stretch"/>
    </Grid>
</Border>

<!-- Camera Ra -->
<Border Grid.Column="1" Background="#F0F0F0" Margin="5" CornerRadius="8"
        BorderBrush="#2C3E50" BorderThickness="2">
    <Grid RowDefinitions="Auto,*">
        <Border Background="#2C3E50" Height="36" CornerRadius="8,8,0,0">
            <TextBlock Text="ðŸš™  RA"
                       Foreground="White" FontSize="18" FontWeight="Bold"
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Border>

        <!-- âœ… XÃ“A MediaPlayer binding, chá»‰ Ä‘á»ƒ x:Name -->
        <vlc:VideoView Grid.Row="1"
                       x:Name="CameraOutView"
                       HorizontalAlignment="Stretch"
                       VerticalAlignment="Stretch"/>
    </Grid>
</Border>
        </Grid>

        <!-- HÃ ng giá»¯a: thÃ´ng tin + snapshot + cÃ¡c nÃºt -->
<Grid Grid.Row="1" ColumnDefinitions="1.5*,3*,1*" Margin="8">

    <!-- ThÃ´ng tin xe -->
    <Border Grid.Column="0" Background="White" Margin="5" Padding="8"
            CornerRadius="8" BorderBrush="#BDC3C7" BorderThickness="1">
        <StackPanel>
            <TextBlock Text="ThÃ´ng tin xe" FontSize="14" FontWeight="Bold"
                       Margin="0,0,0,8" HorizontalAlignment="Center"
                       Foreground="Black"/>
            
            <!--  BIND Biá»ƒn sá»‘ -->
            <TextBlock Text="{Binding PlateNumber, StringFormat='Biá»ƒn sá»‘: {0}'}" 
                       FontSize="12" Foreground="Black" Margin="0,0,0,4"/>
            
            <!--  BIND Thá»i gian -->
            <TextBlock Text="{Binding VehicleDateTime, StringFormat='Thá»i gian: {0}'}" 
                       FontSize="12" Foreground="Black" Margin="0,0,0,6"/>

            <!--  Hiá»ƒn thá»‹ StatusMessage -->
        <TextBlock Text="{Binding StatusMessage}" 
                   FontSize="13" 
                   FontWeight="Bold"
                   Foreground="Green" 
                   Margin="0,8,0,4"
                   TextWrapping="Wrap"
                   HorizontalAlignment="Center"/>



        </StackPanel>
    </Border>

    <!-- áº¢nh snapshot + nÃºt -->
    <Grid Grid.Column="1" Margin="5">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!--  3 áº¢nh snapshot vá»›i binding -->
        <Grid Grid.Row="0" ColumnDefinitions="1*,1*,1*" Margin="0">
            <!-- áº¢nh 1: Má»›i nháº¥t -->
            <Border Grid.Column="0" Background="White" BorderBrush="#BDC3C7"
                    BorderThickness="1" CornerRadius="6" Margin="4" MinHeight="80">
                <Image Source="{Binding Snapshot1}" Stretch="Uniform"/>
            </Border>

            <!-- áº¢nh 2 -->
            <Border Grid.Column="1" Background="White" BorderBrush="#BDC3C7"
                    BorderThickness="1" CornerRadius="6" Margin="4" MinHeight="80">
                <Image Source="{Binding Snapshot2}" Stretch="Uniform"/>
            </Border>

            <!-- áº¢nh 3 -->
            <Border Grid.Column="2" Background="White" BorderBrush="#BDC3C7"
                    BorderThickness="1" CornerRadius="6" Margin="4" MinHeight="80">
                <Image Source="{Binding Snapshot3}" Stretch="Uniform"/>
            </Border>
        </Grid>

        <!-- NÃºt chá»©c nÄƒng -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center"
                    VerticalAlignment="Center" Margin="0,8,0,0" Spacing="12">
            <Button Content="ðŸ“¸ Chá»¥p láº¡i"
                    Command="{Binding CaptureSnapshotCommand}"
                    Background="#7F8C8D" Foreground="White"
                    MinWidth="100" MinHeight="40" Padding="8,4"
                    FontSize="12"/>

            <Button Content="âœ… Ghi vÃ o"
                    Command="{Binding CheckInCommand}"
                    Background="#27AE60" Foreground="White"
                    MinWidth="100" MinHeight="40" Padding="8,4"
                    FontSize="12"/>

            <Button Content="â›” Ghi ra"
                    Command="{Binding CheckOutCommand}"
                    Background="#C0392B" Foreground="White"
                    MinWidth="100" MinHeight="40" Padding="8,4"
                    FontSize="12"/>

            <Button Content="ðŸ–¨ In"
                    Background="#7F8C8D" Foreground="White"
                    MinWidth="100" MinHeight="40" Padding="8,4"
                    FontSize="12"/>
        </StackPanel>
    </Grid>

    <!-- Sá»‘ tiá»n -->
    <Border Grid.Column="2" Background="White" Margin="5" Padding="8"
            CornerRadius="8" BorderBrush="#BDC3C7" BorderThickness="1">
        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
            <TextBlock Text="Sá»‘ tiá»n" FontSize="14" FontWeight="Bold" 
                       Margin="0,0,0,8" Foreground="Black"/>
            
            <!--  BIND Sá»‘ tiá»n -->
            <TextBlock Text="{Binding ParkingFee}" 
                       FontSize="24" FontWeight="Bold" Foreground="#C0392B"/>
        </StackPanel>
    </Border>
</Grid>

       
    </Grid>
        </DockPanel>
</Window>